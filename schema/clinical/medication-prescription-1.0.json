{
   "$schema":"http://json-schema.org/draft-04/schema#",

   "description":"This schema represents a medication prescription e.g., atenolol 20 mg, 2 tablets po once a day.",

   "type":"object",

   "definitions": {
        "medication": {
            "$ref": "medication-1.0.json"
        },
        "unit_value": {
            "$ref": "../generic/unit-value-1.0.json"
        },
        "frequency": {
            "$ref": "../generic/frequency-unit-value-1.0.json"
        },
        "duration": {
            "$ref": "../generic/duration-unit-value-1.0.json"
        }
    },

   "properties": {
      "medication":{
         "$ref": "#/definitions/medication"
      },
      "dose": {
          "allOf": [
              {
                  "$ref": "#/definitions/unit_value"
              },
              {
                  "references": [
                      {
                          "description": "The list of acceptable units of measure for a medication dose, a subset of the HealthVault list",
                          "url": "https://developer.healthvault.com/pages/types/vocab.aspx?name=medication-dose-units&family=wc&version=1",
                          "description": "FDA units of measure",
                          "url": "http://www.fda.gov/ForIndustry/DataStandards/StructuredProductLabeling/ucm168397.htm",
                          "description": "FDA pharmaceutical dosage form",
                          "url": "http://www.fda.gov/ForIndustry/DataStandards/StructuredProductLabeling/ucm162038.htm"
                      }
                  ],
                  "properties": {
                      "unit": {
                          "enum": [
                              "ng",
                              "ug",
                              "mg",
                              "g",
                              "uL",
                              "mL",
                              "dL",
                              "L",
                              "tsp",
                              "tbsp",
                              "mU",
                              "U",
                              "[iU]",
                              "uCi",
                              "Ci",
                              "meq",
                              "nmol",
                              "umol",
                              "mol",
                              "mmol",
                              "cm^2",
                              "{capsule}",
                              "{globule}",
                              "{granule}",
                              "{tablet}"
                          ]
                      }
                  }
              }
          ]
      },
      "route": {
          "type": "string",
          "enum": [
              "ad",
              "as",
              "im",
              "iv",
              "od",
              "os",
              "po",
              "pr",
              "otic",
              "sc",
              "sl",
              "td",
              "top",
              "vag"
          ]
      },
      "frequency": {
          "$ref": "#/definitions/frequency"
      },
      "duration": {
         "$ref": "#/definitions/duration"
      }
   },

   "required": ["medication"]
}