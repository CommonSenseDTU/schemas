{
   "$schema":"http://json-schema.org/draft-04/schema#",

    "description":"This schema represents a medication prescription e.g., atenolol 50 mg, 1 tablet in the morning and 0.5 tablet in the evening for 30 days.",

    "type":"object",

    "definitions": {
        "medication": {
            "$ref": "medication-1.0.json"
        },
        "medication_route": {
            "$ref": "medication-route-1.0.json",
            "default": "oral"
        },
        "medication_dose_unit_value": {
            "type": "object",
            "description": "This property represents the dose of a therapeutic agent. The value set covers the most common values. Suggestions for additions are accepted.",
            "references": [
                {
                    "description": "The NCIT code represents Dose",
                    "url": "http://ncicb.nci.nih.gov/xml/owl/EVS/Thesaurus.owl#C25488"
                }
            ],
            "allOf": [
                {
                    "$ref": "../generic/unit-value-1.0.json"
                },
                {
                    "properties": {
                        "unit": {
                            "references": [
                                {
                                    "description": "The list of acceptable units of measure for a medication dose. Allowed values are drawn in part from FDA units of measure.",
                                    "url": "http://www.fda.gov/ForIndustry/DataStandards/StructuredProductLabeling/ucm168397.htm"
                                },
                                {
                                    "description": "The list of acceptable units of measure for a medication dose. Allowed values are drawn in part from FDA pharmaceutical dosage form.",
                                    "url": "http://www.fda.gov/ForIndustry/DataStandards/StructuredProductLabeling/ucm162038.htm"
                                }
                            ],
                            "enum": [
                                "%",
                                "AU",
                                "AU/mL",
                                "bar",
                                "BAU",
                                "BAU/mL",
                                "bead",
                                "BU",
                                "capsule",
                                "CCID_50",
                                "cellular sheet",
                                "Ci",
                                "cloth",
                                "cm^2",
                                "D'ag'U",
                                "disc",
                                "dL",
                                "douche",
                                "drop",
                                "FFU",
                                "g",
                                "globule",
                                "granule",
                                "gum",
                                "hp_C",
                                "hp_M",
                                "hp_Q",
                                "hp_X",
                                "IU",
                                "IU/L",
                                "IU/mL",
                                "kp_C",
                                "L",
                                "Lf",
                                "LfU/mL",
                                "lozenge",
                                "mCi",
                                "mCi/mL",
                                "mEq",
                                "mg",
                                "mg/actuat",
                                "mg/hr",
                                "mg/mg",
                                "mg/mL",
                                "mL",
                                "mmol",
                                "mol",
                                "mU",
                                "ng",
                                "nmol",
                                "organisms",
                                "pastille",
                                "patch",
                                "pellet",
                                "PFU",
                                "pill",
                                "PNU",
                                "PNU/mL",
                                "pouch",
                                "puff",
                                "ring",
                                "salve",
                                "stick",
                                "strip",
                                "suppository",
                                "swab",
                                "tablet",
                                "tampon",
                                "tape",
                                "tbsp",
                                "TCID_50",
                                "tsp",
                                "U",
                                "uCi",
                                "ug",
                                "ug/mL",
                                "uL",
                                "umol",
                                "unt",
                                "unt/mL",
                                "USP'U",
                                "vial",
                                "wafer",
                                "X"
                            ]
                        }
                    }
                }
            ]
        },
        "frequency_unit_value": {
            "$ref": "../generic/frequency-unit-value-1.0.json"
        },
        "duration_unit_value": {
            "$ref": "../generic/duration-unit-value-1.0.json"
        }
    },

    "properties": {
         "medication":{
             "$ref": "#/definitions/medication"
         },
         "route": {
             "$ref": "#/definitions/medication_route"
         },
         "schedule": {
             "type": "array",
             "description": "A medication can have different schedules (dose and dose recurrence) for different times, hence this is an array.",
             "items": {
                 "type": "object",
                 "properties": {
                     "dose": {
                         "$ref": "#/definitions/medication_dose_unit_value"
                     },
                     "dose_recurrence": {
                         "$ref": "#/definitions/frequency_unit_value"
                     }
                 },
                 "required": ["dose","dose_recurrence"]
             }
         },
         "prescription_duration": {
              "$ref": "#/definitions/duration_unit_value"
         }
    },

    "required": ["medication","schedule","prescription_duration"]
}
