{
   "$schema":"http://json-schema.org/draft-04/schema#",

    "description":"This schema represents the dispensing by a pharmacy of medication based on a prescription e.g., atenolol 50 mg, 20 tab.",

    "type":"object",
    "references": [
        {
            "description": "The SNOMED code represents XXX",
            "url": "http://purl.bioontology.org/ontology/SNOMEDCT/XXX"
        }
    ],

    "definitions": {
        "medication_prescription": {
            "$ref": "medication-prescription-1.0.json"
        },
        "time_frame": {
            "$ref": "../generic/time-frame-2.0.json"
        }
    },

    "properties": {
        "medication_prescription":{
            "$ref": "#/definitions/medication_prescription"
        },
        "medication_dispensed": {
            "description": "NDC code 9 med + 2 package size"
        },
        "amount_dispensed": {
            "allOf": [
                {
                    "$ref": "../generic/unit-value-1.0.json"
                },
                {
                    "properties": {
                        "unit": {
                            "description": "DRAFT: The list of most commonly used units of measure for a medication dispensed. Suggestions for additions are accepted.",
                            "references": [
                                {
                                    "description": "Units are drawn in part from FDA units of presentation.",
                                    "url": "http://www.fda.gov/ForIndustry/DataStandards/StructuredProductLabeling/ucm162049.htm"
                                },
                                {
                                    "description": "Units are drawn in part from FDA pharmaceutical dosage form.",
                                    "url": "http://www.fda.gov/ForIndustry/DataStandards/StructuredProductLabeling/ucm162038.htm"
                                }
                            ],
                            "enum": [
                                "ampule",
                                "applicator",
                                "bag",
                                "bar",
                                "bead",
                                "blister",
                                "capsule",
                                "cellular sheet",
                                "cloth",
                                "disc",
                                "douche",
                                "globule",
                                "granule",
                                "gum",
                                "lozenge",
                                "pastille",
                                "patch",
                                "pellet",
                                "pill",
                                "pouch",
                                "puff",
                                "ring",
                                "salve",
                                "stick",
                                "strip",
                                "suppository",
                                "swab",
                                "tablet",
                                "tampon",
                                "tape",
                                "troche",
                                "tube",
                                "vial",
                                "wafer"
                            ]
                        }
                    }
                }
            ]
        },
        "time_frame_medication_prepared": {
            "$ref": "#/definitions/time_frame"
        },
        "time_frame_medication_dispensed": {
            "$ref": "#/definitions/time_frame"
        },
        "remaining_refills": {
            "type": "number"
        },
        "remaining_amount": {
            "type": "number"
        }
    },
    "required": ["medication_prescription","medication_dispensed","amount_dispensed","time_frame_medication_dispensed"]
}